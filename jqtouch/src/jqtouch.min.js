(function(){var k;if("Zepto"in window)k=window.Zepto,k.fn.prop=k.fn.attr,Event.prototype.isDefaultPrevented=function(){return this.defaultPrevented};else if("jQuery"in window)k=window.jQuery,window.Zepto=$;else throw"Either Zepto or jQuery is required but neither can be found.";$.jQTouch=function(F){function x(a){"string"===typeof a.selector&&"string"===typeof a.name&&l.push(a)}function m(a){"string"===typeof a.name&&"function"===typeof a.isSupported&&"function"===typeof a.fn&&s.push(a)}function y(a,
b){j.unshift({page:a,animation:b,hash:"#"+a.attr("id"),id:a.attr("id")})}function G(a){var b=d(a.target);b.is(h.join(", "))||(b=d(a.target).closest(h.join(", ")));b&&b.attr("href")&&!b.isExternalLink()&&a.preventDefault();d.support.touch||d(a.target).trigger("tap",a)}function z(a,b,c,g){function t(){var h=H;d.support.animationEvents&&c&&e.useAnimations?(a.unbind("webkitAnimationEnd",t),a.removeClass(f+" out inmotion"),f&&b.removeClass(f),i.removeClass("animating animating3d"),!0===e.trackScrollPositions&&
(b.css("top",-b.data("lastScroll")),setTimeout(function(){b.css("top",0);window.scroll(0,b.data("lastScroll"));d(".scroll",b).each(function(){this.scrollTop=-d(this).data("lastScroll")})},0))):(a.removeClass(f+" out inmotion"),f&&b.removeClass(f),h+=260);setTimeout(function(){b.removeClass("in");window.scroll(0,0)},h);a.unselect();b.trigger("pageAnimationEnd",{direction:"in",animation:c,back:g});a.trigger("pageAnimationEnd",{direction:"out",animation:c,back:g})}g=g?g:!1;if(void 0===b||0===b.length||
b.hasClass("current"))return d.fn.unselect(),!1;d(":focus").trigger("blur");a.trigger("pageAnimationStart",{direction:"out",back:g});b.trigger("pageAnimationStart",{direction:"in",back:g});if(d.support.animationEvents&&c&&e.useAnimations){if(!d.support.transform3d&&c.is3d)c.name=e.defaultAnimation;var f=c.name,h=c.is3d?"animating3d":"";g&&(f=f.replace(/left|right|up|down|in|out/,I));a.bind("webkitAnimationEnd",t);i.addClass("animating "+h);h=window.pageYOffset;!0===e.trackScrollPositions&&b.css("top",
window.pageYOffset-(b.data("lastScroll")||0));b.addClass(f+" in current");a.removeClass("current").addClass(f+" out inmotion");!0===e.trackScrollPositions&&(a.data("lastScroll",h),d(".scroll",a).each(function(){d(this).data("lastScroll",this.scrollTop)}))}else b.addClass("current in"),a.removeClass("current"),t();n=b;g?j.shift():y(n,c);A(n.attr("id"));return!0}function I(a){return{up:"down",down:"up",left:"right",right:"left","in":"out",out:"in"}[a]||a}function q(){1===j.length&&window.history.go(-1);
var a=j[0];return z(a.page,j[1].page,a.animation,!0)?o:!1}function p(a,b){var c=j[0].page;if("string"===typeof b)for(var g=0,e=l.length;g<e;g++)if(l[g].name===b){b=l[g];break}if("string"===typeof a){g=d(a);if(1>g.length){u(a,{animation:b});return}a=g}return z(c,a,b)?o:!1}function J(){if(location.hash===j[0].hash)return!0;if(""===location.hash||j[1]&&location.hash===j[1].hash)return q(),!0;p(d(location.hash),e.defaultAnimation)}function v(a){for(var b,c=0,d=l.length;c<d;c++)if(a.is(l[c].selector)){b=
l[c];break}if(!b)b=e.defaultAnimation;return b}function B(a,b){var c=null,g=document.createElement("div");g.innerHTML=a;d(g).children().each(function(){var a=d(this);a.attr("id")||a.attr("id","page-"+ ++K);d("#"+a.attr("id")).remove();i.append(a);i.trigger("pageInserted",{page:a});if(a.hasClass("current")||!c)c=a});return null!==c?(p(c,b),c):!1}function L(){i.css("minHeight",1E3);scrollTo(0,0);i.css("minHeight",window.innerHeight);r=90==Math.abs(window.orientation)?"landscape":"portrait";i.removeClass("portrait landscape").addClass(r).trigger("turn",
{orientation:r})}function A(a){location.hash="#"+a.replace(/^#/,"")}function u(a,b){var c=d.extend({},{data:null,method:"GET",animation:null,callback:null,$referrer:null},b);"#"!=a?d.ajax({url:a,data:c.data,type:c.method,success:function(a){if(a=B(a,c.animation))"GET"==c.method&&!0===e.cacheGetRequests&&c.$referrer&&c.$referrer.attr("href","#"+a.attr("id")),c.callback&&c.callback(!0)},error:function(){c.$referrer&&c.$referrer.unselect();c.callback&&c.callback(!1)}}):c.$referrer&&c.$referrer.unselect()}
function C(a,b){d(":focus").trigger("blur");a.preventDefault();var c="string"===typeof a?d(a).eq(0):a.target?d(a.target):d(a);return c.length&&c.is(e.formSelector)&&c.attr("action")?(u(c.attr("action"),{data:c.serialize(),method:c.attr("method")||"POST",animation:v(c),callback:b}),!1):!0}function M(){var a,b,c,d;a=document.getElementsByTagName("head")[0];b=document.body;c=document.createElement("style");c.textContent="@media (transform-3d),(-o-transform-3d),(-moz-transform-3d),(-webkit-transform-3d){#jqt-3dtest{height:3px}}";
d=document.createElement("div");d.id="jqt-3dtest";a.appendChild(c);b.appendChild(d);a=3===d.offsetHeight;c.parentNode.removeChild(c);d.parentNode.removeChild(d);return a}function N(){var a=!1,b=/OS (\d+)(_\d+)* like Mac OS X/i,c=window.navigator.userAgent;b.test(c)&&(a=5<=b.exec(c)[1]);return a}function O(a){var b=d(a.target),a=h.join(", ");b.is(a)||(b=b.closest(a));b.length&&b.attr("href")&&b.addClass("active");b.on(d.support.touch?"touchmove":"mousemove",function(){b.removeClass("active")});b.on("touchend",
function(){b.unbind("touchmove mousemove")})}function P(a){if(a.isDefaultPrevented())return!0;var b=d(a.target);b.is(h.join(", "))||(b=b.closest(h.join(", ")));if(!b.length||!b.attr("href"))return!0;for(var c=b.attr("target"),g=b.prop("hash"),f=b.attr("href"),b={e:a,$el:b,target:c,hash:g,href:f,jQTSettings:e},c=0,g=s.length;c<g;c++)if(f=s[c],f.isSupported(a,b))return f.fn(a,b)}function Q(){m({name:"external-link",isSupported:function(a,b){return b.$el.isExternalLink()},fn:function(a,b){b.$el.unselect();
return!0}});m({name:"back-selector",isSupported:function(a,b){return b.$el.is(b.jQTSettings.backSelector)},fn:function(a,b){q(b.hash)}});m({name:"submit-selector",isSupported:function(a,b){return b.$el.is(b.jQTSettings.submitSelector)},fn:function(a,b){var c=b.$el.closest("form");0!==c.length&&c.trigger("submit")}});m({name:"webapp",isSupported:function(a,b){return"_webapp"===b.target},fn:function(a,b){window.location=b.href;return!1}});m({name:"no-op",isSupported:function(a,b){return"#"===b.href},
fn:function(a,b){b.$el.unselect();return!0}});m({name:"standard",isSupported:function(a,b){return b.hash&&"#"!==b.hash},fn:function(a,b){var c=v(b.$el);b.$el.addClass("active");p(d(b.hash).data("referrer",b.$el),c,b.$el.hasClass("reverse"));return!1}});m({name:"external",isSupported:function(){return!0},fn:function(a,b){var c=v(b.$el);b.$el.addClass("loading active");u(b.$el.attr("href"),{animation:c,callback:function(){b.$el.removeClass("loading");setTimeout(d.fn.unselect,250,b.$el)},$referrer:b.$el});
return!1}})}var d=k,i,R=d("head"),j=[],K=0,e={},n="",r="portrait",h=[],o={},H=100,D=d.jQTouch.prototype.extensions,E=d.jQTouch.prototype.tapHandlers,s=[],l=[],f="",w={addGlossToIcon:!0,backSelector:".back, .cancel, .goback",cacheGetRequests:!0,debug:!0,defaultAnimation:"slideleft",fixedViewport:!0,formSelector:"form",fullScreen:!0,fullScreenClass:"fullscreen",icon:null,icon4:null,preloadImages:!1,startupScreen:null,startupSceen5:null,statusBar:"default",submitSelector:".submit",touchSelector:"a, .touch",
trackScrollPositions:!0,useAnimations:!0,useFastTouch:!0,useTouchScroll:!0,animations:[{name:"cubeleft",selector:".cubeleft, .cube",is3d:!0},{name:"cuberight",selector:".cuberight",is3d:!0},{name:"dissolve",selector:".dissolve"},{name:"fade",selector:".fade"},{name:"flipleft",selector:".flipleft, .flip",is3d:!0},{name:"flipright",selector:".flipright",is3d:!0},{name:"pop",selector:".pop",is3d:!0},{name:"swapleft",selector:".swap",is3d:!0},{name:"slidedown",selector:".slidedown"},{name:"slideright",
selector:".slideright"},{name:"slideup",selector:".slideup"},{name:"slideleft",selector:".slideleft, .slide, #jqt > * > ul li a"}]};(function(a){e=d.extend({},w,a);if(e.preloadImages)for(a=e.preloadImages.length-1;0<=a;a--)(new Image).src=e.preloadImages[a];a=e.addGlossToIcon?"":"-precomposed";e.icon&&(f+='<link rel="apple-touch-icon'+a+'" href="'+e.icon+'" />');e.icon4&&(f+='<link rel="apple-touch-icon'+a+'" sizes="114x114" href="'+e.icon4+'" />');e.startupScreen&&(f+='<link rel="apple-touch-startup-image" href="'+
e.startupScreen+'" />');e.startupScreen5&&(f+='<link rel="apple-touch-startup-image" href="'+e.startupScreen5+'" sizes="640x1096">');e.fixedViewport&&(f+='<meta name="viewport" content="user-scalable=0, maximum-scale=1.0, initial-scale=1.0" />');e.fullScreen&&(f+='<meta name="apple-mobile-web-app-capable" content="yes" />',e.statusBar&&(f+='<meta name="apple-mobile-web-app-status-bar-style" content="'+e.statusBar+'" />'));f&&R.prepend(f)})(F);d(document).ready(function(){if(!d.support)d.support={};
d.support.animationEvents="undefined"!=typeof window.WebKitAnimationEvent;d.support.touch="undefined"!=typeof window.TouchEvent&&-1<window.navigator.userAgent.indexOf("Mobile")&&e.useFastTouch;d.support.transform3d=M();d.support.ios5=N();d.fn.isExternalLink=function(){var a=d(this);return"_blank"==a.attr("target")||"external"==a.attr("rel")||a.is('a[href^="http://maps.google.com"], a[href^="mailto:"], a[href^="tel:"], a[href^="javascript:"], a[href*="youtube.com/v"], a[href*="youtube.com/watch"]')};
d.fn.makeActive=function(){return d(this).addClass("active")};d.fn.unselect=function(a){a?a.removeClass("active"):d(".active").removeClass("active")};for(var a=0,b=D.length;a<b;a++){var c=D[a];d.isFunction(c)&&d.extend(o,c(o))}a=0;for(b=E.length;a<b;a++)m(E[a]);Q();a=0;for(b=w.animations.length;a<b;a++){c=w.animations[a];if(void 0!==e[c.name+"Selector"])c.selector=e[c.name+"Selector"];x(c)}h.push(e.touchSelector);h.push(e.backSelector);h.push(e.submitSelector);d(h.join(", ")).css("-webkit-touch-callout",
"none");i=d("#jqt");a=[];0===i.length&&(i=d(document.body).attr("id","jqt"));d.support.transform3d&&a.push("supports3d");d.support.ios5&&e.useTouchScroll&&a.push("touchscroll");e.fullScreenClass&&!0===window.navigator.standalone&&a.push(e.fullScreenClass,e.statusBar);i.addClass(a.join(" ")).bind("click",G).bind("orientationchange",L).bind("submit",C).bind("tap",P).bind(d.support.touch?"touchstart":"mousedown",O).trigger("orientationchange");d(window).bind("hashchange",J);a=location.hash;n=0===d("#jqt > .current").length?
d("#jqt > *:first-child").addClass("current"):d("#jqt > .current");A(n.attr("id"));y(n);1===d(a).length&&p(a)});return o={addAnimation:x,animations:l,getOrientation:function(){return r},goBack:q,insertPages:B,goTo:p,history:j,settings:e,submitForm:C}};$.jQTouch.prototype.extensions=[];$.jQTouch.prototype.tapHandlers=[];$.jQTouch.addExtension=function(k){$.jQTouch.prototype.extensions.push(k)};$.jQTouch.addTapHandler=function(k){$.jQTouch.prototype.tapHandlers.push(k)}})();
