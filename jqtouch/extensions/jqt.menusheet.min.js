(function(a){var f=(a("head script").last().attr("src")||"").split("?")[0].split("/").slice(0,-1).join("/")+"/jqt.menusheet.css",f=a('<link href="'+f+'" rel="stylesheet">');a("head").append(a(f));var g={init:function(){a(this).addClass("menusheet");a(this).data({shown:!1})},show:function(c){var b=a(this),e=a(this).data("menusheet")||{};if(!e.shown){var d=a("#jqt .current:not(.menusheet)"),f=function(){b.menusheet("hide");return!1};d.one("webkitTransitionEnd",function(){d.one("touchstart mousedown",
f);d.removeClass("inmotion transition out");b.removeClass("inmotion in");!c||c.apply(this,arguments)});e.shown=!0;e.closehandler=f;e.source=d;a(this).data("menusheet",e);d.addClass("inmotion transition out");b.addClass("current in");a("#jqt").addClass("menuopened")}return b},hide:function(c){var b=a(this),e=a(this).data("menusheet");if(e.shown){a(this).data("menusheet",{});var d=e.source;d.unbind("touchstart mousedown",e.closehandler);d.one("webkitTransitionEnd",function(){d.removeClass("inmotion transition in");
b.removeClass("inmotion out");!c||c.apply(this,arguments)});d.addClass("inmotion transition in");b.addClass("inmotion out").removeClass("current");a("#jqt").removeClass("menuopened")}return b}};a.fn.menusheet=function(c){if(g[c]){if(a(this).is(".menusheet"))return g[c].apply(this,Array.prototype.slice.call(arguments,1));console.warn("Target is not a `menusheet`. Action `"+c+"` is ignored.")}else{if("object"===typeof c||!c)return g.init.apply(this,arguments);a.error("Method "+c+" does not exist on jQuery.tooltip")}};
a.jQTouch?(a.jQTouch.addTapHandler({name:"open-menusheet",isSupported:function(a,b){return b.$el.is(".menu")},fn:function(c,b){b.$el.removeClass("active");a(b.hash).menusheet("show");return!1}}),a.jQTouch.addTapHandler({name:"follow-menulink",isSupported:function(c,b){return a("#jqt").hasClass("menuopened")?b.$el.is(".menusheet a"):!1},fn:function(a,b){b.$el.removeClass("active");b.$el.closest(".menusheet").menusheet("hide",function(){b.$el.is(".dismiss")||b.$el.trigger("tap")});return!1}})):console.error("Extension `jqt.menusheet` failed to load. jQT not found")})($);
